# 模版语法与数据绑定

接下来我们开始做一个简易的选色器，来讲解Vuejs的模版语法。

[在线演示（Demo）](https://smilecc.github.io/learn-vue2x/demo/1_4/)

## 开始

talk is cheap，show me the code。

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <title>RGB</title>
    <style type="text/css">
        .canvas {
            width: 200px;
            height: 60px;
        }
    </style>
</head>
    <div id="app">
        <div v-bind:style="calcColor" class="canvas"></div>

        <div>
            <span>红</span>
            <input type="range" min="0" max="255" step="1" v-model="red" />
            <span>{{ red }}</span>
        </div>
        <div>
            <span>绿</span>
            <input type="range" min="0" max="255" step="1" v-model="green" />
            <span>{{ green }}</span>
        </div>
        <div>
            <span>蓝</span>
            <input type="range" min="0" max="255" step="1" v-model="blue" />
            <span>{{ blue }}</span>
        </div>
        <button @click="getRGB">获取当前RGB</button>
    </div>
    <script type="text/javascript" src="main.out.js"></script>
</body>
</html>
```

**Javascript**

```
import Vue from 'vue'

const app = new Vue({
	el: '#app',
	data () {
		return {
			red: 0,
			green: 0,
			blue: 0
		}
	},
	methods: {
		getRGB () {
			alert(
				'红: '+ this.red + 
				'\n绿: ' + this.green + 
				'\n蓝: ' + this.blue
				);
		}
	},
	computed: {
		calcColor () {
			return 'background-color: rgb(' 
								+ this.red + ', ' 
								+ this.green + ', ' 
								+ this.blue + ')';
		}
	}
});
```

---

首先我们设定了一个宽200像素，高60像素的div来作为我们的画板。紧接着我们使用了`v-bind:style`将该元素的`style`属性绑定到我们的**计算属性**之中。

随后我们使用了三个Input Range作为数据的来源（Input Range是HTML5中的新特性，早期浏览器无法支持）。随后，我们使用`v-model`对**表单控件**进行了**双向数据绑定**。

---

## 模版语法

### 插值

---

#### 文本

通过**双大括号**向页面中进行插值，在上个例子中我们已经学习到这种用法，这也是最常见的数据绑定方式。

```
<span>Message: {{ msg }}</span>
```

当绑定的数据对象上的`msg`发生改变，插值处也会自动更新。

如果我们想要数据不再更新，也可以使用v-once指令进行一次性插值。

```
<span v-once>Message: {{ msg }}</span>
```

此时当数据对象上的`msg`改变，插值处也不会改变。

#### HTML

双大括号会将数据解释为纯文本，当我们需要输出HTML的时候，我们就需要使用`v-html`指令。

```
<div v-html="rawHtml"></div>
```

被插入的文本会被解析为HTML，在其中进行的数据绑定也会被忽略。

但要注意的是：

1. 不要用`v-html`来合成复杂的HTML，Vue的组件将更能胜任这一点
2. 请**只对可信任的内容来源进行HTML插值**，否则非常容易造成XSS攻击（跨站脚本攻击）



